import google.generativeai as genai
import gradio as gr

# 1. Configuration (Direct Gemini Power)
API_KEY = "AIzaSyC5Ifzfmp-tZZ8E6So-CpaSK1vPzcC6Mjc"
genai.configure(api_key=API_KEY)
# Initialize the model without restrictive instructions
model = genai.GenerativeModel('gemini-1.5-flash') 

# 2. Smart Logic (No more random answers)
def chatbot_response(message, history):
    if not message: return "I'm listening..."
    try:
        # Direct call to Gemini for a real conversation
        chat = model.start_chat(history=[])
        response = chat.send_message(message)
        return response.text
    except Exception as e:
        return f"⚠️ Connection Error: {str(e)}"

# 3. High-End Futuristic CSS
custom_css = """
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

/* Animated Dark Background */
.gradio-container {
    background: linear-gradient(-45deg, #0f172a, #1e1b4b, #581c87, #020617);
    background-size: 400% 400%;
    animation: gradient 15s ease infinite;
    font-family: 'Orbitron', sans-serif !important;
}

@keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.main-title h1 { color: #00f2ff !important; text-shadow: 0 0 10px #00f2ff; }
.chatbot .user { background-color: #1e293b !important; border: 1px solid #38bdf8 !important; }
.chatbot .bot { background-color: #0f172a !important; border: 1px solid #c026d3 !important; }
"""

# 4. Building the UI
with gr.Blocks(css=custom_css) as demo:
    gr.HTML("<div class='main-title'><h1> ⚡ AYA-TECH NEURAL INTERFACE </h1></div>")
    
    chat_ui = gr.ChatInterface(
        fn=chatbot_response,
        description="Experience the full power of Gemini 1.5 Flash with Animated UI.",
        examples=["Explain Quantum Physics like I'm five", "Write a Python script for a neural network"],
    )

if __name__ == "__main__":
    demo.launch(share=True, debug=True)
